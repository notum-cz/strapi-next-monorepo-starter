{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "yarn install && yarn build"
  },
  "deploy": {
    "numReplicas": 1,
    "sleepApplication": false,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "healthcheckPath": "/admin",
    "healthcheckTimeout": 300,
    "resourceLimits": {
      "memory": "512Mi",
      "cpu": "500m"
    }
  },
  "costProtection": {
    "enabled": true,
    "description": "Free-tier cost protection guardrails",
    "maxMemoryMb": 512,
    "maxCpuCores": 0.5,
    "autoSleep": {
      "enabled": true,
      "idleTimeoutMinutes": 15,
      "description": "Auto-sleep after 15 minutes of inactivity to conserve resources"
    },
    "freeTierMonitoring": {
      "enabled": true,
      "thresholds": {
        "monthlyUsageUsd": 5.0,
        "executionHours": 500,
        "description": "Monitor usage and trigger maintenance mode if free tier at risk"
      }
    }
  },
  "maintenanceMode": {
    "description": "Configuration for automatic maintenance mode deployment when free tier is breached",
    "enabled": true,
    "staticPagePath": "./maintenance.html",
    "triggers": [
      "FREE_TIER_EXCEEDED",
      "COST_THRESHOLD_REACHED"
    ]
  }
}
